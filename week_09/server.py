#!/usr/bin/python
import socket
import threading

SERVER_PORT = 50000


def send_message(client_socket, address):
    received_message = client_socket.recv(1024)
    print("Client sent from address {}: {}".format(address, received_message))
    message = "Message received"
    client_socket.send(message.encode())
    client_socket.close()


def start():
    s = socket.socket()
    host = socket.gethostname()
    s.bind((host, SERVER_PORT))
    s.listen(5)

    print("Waiting for connections on port:", SERVER_PORT)
    while True:
        client_socket, address = s.accept()
        print("Accepted connection from address {}: {}".format(
            address, client_socket))
        threading.Thread(target=send_message(client_socket, address)).start()


if __name__ == "__main__":
    start()
